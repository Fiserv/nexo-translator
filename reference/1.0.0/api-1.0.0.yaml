openapi: 3.0.0
info:
  description: Supports a subset of the Nexo payment standards
  version: v32
  title: CommerceHub Nexo Translator REST API
tags:
  - name: commerce-hub-nexo-translator-controller
    description: Commerce Hub Nexo Translator Controller
paths:
  /transaction/v32:
    post:
      tags:
        - commerce-hub-nexo-translator-controller
      x-group-name: Translator
      x-proxy-name: Transaction
      summary: Nexo Transaction
      description: Performs a transaction posted in Nexo format. Supports a subset of the
        Nexo payment standards.
      operationId: transactionV32PostUsingPOST
      parameters:
        - name: Accept-Language
          in: header
          description: Accept-Language
          required: true
          schema:
            type: string
        - name: Api-Key
          in: header
          description: API key provided to the merchant associating the requests with the
            appropriate app in the Developer Portal.
          required: true
          schema:
            type: string
        - name: Authorization
          in: header
          description: Basic authorization credentials to authenticate to CommerceHub
            component microservices.
          required: true
          schema:
            type: string
        - name: Client-Request-Id
          in: header
          description: A client-generated ID for request tracking and signature creation,
            unique per request. This is also used for idempotency control.
            Recommended 128-bit UUID format.
          required: true
          schema:
            type: string
        - name: Content-Type
          in: header
          description: The content type. Valid value (application/xml).
          required: true
          schema:
            type: string
            enum:
              - application/xml
            default: application/xml
        - name: Timestamp
          in: header
          description: Epoch timestamp in milliseconds in the request from a client system.
            Used for authorization header generation and time limit (5 minutes).
          required: true
          schema:
            type: integer
            format: int64
        - name: X-AuthorizationId
          in: header
          description: Populated by APIGEE. MID or StoreId value.
          required: false
          schema:
            type: string
        - name: X-AuthorizationType
          in: header
          description: Populated by APIGEE. Type of AuthorizationId (MID or StoreId).
          required: false
          schema:
            type: string
        - name: X-B3-SpanId
          in: header
          description: 64 lower-hex encoded bits (absent on root span).
          required: true
          schema:
            type: string
        - name: X-B3-TraceId
          in: header
          description: APIGEE injected random UUID (APITraceId).
          required: true
          schema:
            type: string
        - name: X-Developer-Email
          in: header
          description: Populated by APIGEE, Developer-Email  injected by APIGEE.
          required: true
          schema:
            type: string
        - name: X-Forwarded-For
          in: header
          description: Identifies the originating IP address of a client.
          required: true
          schema:
            type: string
        - name: X-Originator
          in: header
          description: "Populated by APIGEE, the value from Developer App Custom Attribute:
            X-Originator."
          required: true
          schema:
            type: string
        - name: X-System-Entry-Time
          in: header
          description: Populated by APIGEE. Epoch timestamp in milliseconds for elapsed
            time.
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/xml:
            schema:
              $ref: "#/components/schemas/NexoRequest"
          application/json:
            schema:
              $ref: "#/components/schemas/NexoRequest"
        description: Nexo Request
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
            application/xml:
              schema:
                type: object
        "201":
          description: Created
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
servers:
  - url: //localhost:8080/
components:
  schemas:
    AcceptedAuthorizationRequest:
      type: object
      properties:
        Hdr:
          $ref: "#/components/schemas/Header"
        authorizationRequest:
          $ref: "#/components/schemas/AuthorizationRequest"
      title: AcceptedAuthorizationRequest
    AcceptorCancellationAdvice:
      type: object
      properties:
        Hdr:
          $ref: "#/components/schemas/Header"
        cancellationAdvice:
          $ref: "#/components/schemas/CancellationAdvice"
      title: AcceptorCancellationAdvice
    Acquirer:
      type: object
      properties:
        Id:
          $ref: "#/components/schemas/AcquirerIdentification"
      title: Acquirer
    AcquirerIdentification:
      type: object
      properties:
        Id:
          type: string
          xml:
            name: Id
            attribute: false
            wrapped: false
      title: AcquirerIdentification
    Authentication:
      type: object
      properties:
        AuthntcnMtd:
          type: string
        AuthntcnVal:
          type: string
      title: Authentication
    AuthorizationRequest:
      type: object
      properties:
        Bal:
          $ref: "#/components/schemas/Balance"
        Cntxt:
          $ref: "#/components/schemas/Context"
        Tx:
          $ref: "#/components/schemas/Transaction"
        environment:
          $ref: "#/components/schemas/Environment"
      title: AuthorizationRequest
    Balance:
      type: object
      properties:
        Amt:
          type: string
          xml:
            name: Amt
            attribute: false
            wrapped: false
        Ccy:
          type: string
          xml:
            name: Ccy
            attribute: false
            wrapped: false
      title: Balance
    CancellationAdvice:
      type: object
      properties:
        Bal:
          $ref: "#/components/schemas/Balance"
        Cntxt:
          $ref: "#/components/schemas/Context"
        Tx:
          $ref: "#/components/schemas/Transaction"
        environment:
          $ref: "#/components/schemas/Environment"
      title: CancellationAdvice
    Card:
      type: object
      properties:
        paymentAccountReference:
          type: string
          xml:
            name: PmtAcctRef
            attribute: false
            wrapped: false
        protectedCardData:
          $ref: "#/components/schemas/ProtectedCardData"
      title: Card
    CardHolder:
      type: object
      properties:
        Lang:
          type: string
        authentication:
          $ref: "#/components/schemas/Authentication"
        taxVerificationResult:
          $ref: "#/components/schemas/TaxVerificationResult"
      title: CardHolder
    ContentEncryptionAlgorithm:
      type: object
      properties:
        algo:
          type: string
          xml:
            name: Algo
            attribute: false
            wrapped: false
      title: ContentEncryptionAlgorithm
    Context:
      type: object
      properties:
        PmtCntxt:
          $ref: "#/components/schemas/PaymentContext"
        SaleCntxt:
          type: string
          xml:
            name: SaleCntxt
            attribute: false
            wrapped: false
      title: Context
    EncryptedContent:
      type: object
      properties:
        contentEncryptionAlgorithm:
          $ref: "#/components/schemas/ContentEncryptionAlgorithm"
        contentType:
          type: string
          xml:
            name: CnttTp
            attribute: false
            wrapped: false
        encryptedData:
          type: string
          xml:
            name: NcrptdData
            attribute: false
            wrapped: false
      title: EncryptedContent
    EnvelopedData:
      type: object
      properties:
        encryptedContent:
          $ref: "#/components/schemas/EncryptedContent"
        recipient:
          $ref: "#/components/schemas/Recipient"
      title: EnvelopedData
    Environment:
      type: object
      properties:
        acquirer:
          $ref: "#/components/schemas/Acquirer"
        card:
          $ref: "#/components/schemas/Card"
        cardHolder:
          $ref: "#/components/schemas/CardHolder"
        merchant:
          $ref: "#/components/schemas/Merchant"
        poi:
          $ref: "#/components/schemas/NexoPersonOfInterest"
      title: Environment
    Header:
      type: object
      properties:
        InitgPty:
          $ref: "#/components/schemas/InitiatingParty"
        MsgFctn:
          type: string
          xml:
            name: MsgFctn
            attribute: false
            wrapped: false
        Tracblt:
          $ref: "#/components/schemas/Traceability"
        XchgId:
          type: string
          xml:
            name: XchgId
            attribute: false
            wrapped: false
      title: Header
    InitiatingParty:
      type: object
      properties:
        Id:
          type: string
          xml:
            name: Id
            attribute: false
            wrapped: false
      title: InitiatingParty
    KEK:
      type: object
      properties:
        encryptedKey:
          type: string
          xml:
            name: NcrptdKey
            attribute: false
            wrapped: false
        kekId:
          $ref: "#/components/schemas/KEKIdentification"
      title: KEK
    KEKIdentification:
      type: object
      properties:
        derivationId:
          type: string
          xml:
            name: DerivtnId
            attribute: false
            wrapped: false
      title: KEKIdentification
    LocationAndContact:
      type: object
      properties:
        postalAddress:
          $ref: "#/components/schemas/PostalAddress"
      title: LocationAndContact
    Merchant:
      type: object
      properties:
        commonName:
          type: string
          xml:
            name: CmonNm
            attribute: false
            wrapped: false
        locationAndContact:
          $ref: "#/components/schemas/LocationAndContact"
        merchantIdentification:
          $ref: "#/components/schemas/MerchantIdentification"
      title: Merchant
    MerchantIdentification:
      type: object
      properties:
        id:
          type: string
          xml:
            name: Id
            attribute: false
            wrapped: false
      title: MerchantIdentification
    NexoCapabilities:
      type: object
      properties:
        approvalCodeLength:
          type: integer
          format: int32
          xml:
            name: ApprvlCdLngth
            attribute: false
            wrapped: false
        cardCaptureCapable:
          type: boolean
          xml:
            name: CardCaptrCpbl
            attribute: false
            wrapped: false
        cardReadingCapabilities:
          type: array
          xml:
            name: CardRdngCpblties
            attribute: false
            wrapped: false
          items:
            type: string
        cardholderVerificationCapabilities:
          type: array
          xml:
            name: CrdhldrVrfctnCpblties
            attribute: false
            wrapped: false
          items:
            type: string
        maxScriptLength:
          type: integer
          format: int32
          xml:
            name: MxScrptLngth
            attribute: false
            wrapped: false
        pinCaptureCapability:
          type: string
          xml:
            name: PINLngthCpblties
            attribute: false
            wrapped: false
      title: NexoCapabilities
    NexoPersonOfInterest:
      type: object
      properties:
        capabilities:
          $ref: "#/components/schemas/NexoCapabilities"
        poiComponents:
          type: array
          xml:
            name: Cmpnt
            attribute: false
            wrapped: false
          items:
            $ref: "#/components/schemas/POIComponent"
        poiIdentification:
          $ref: "#/components/schemas/POIIdentification"
      title: NexoPersonOfInterest
    NexoRequest:
      type: object
      properties:
        AccptrAuthstnReq:
          $ref: "#/components/schemas/AcceptedAuthorizationRequest"
        AccptrCxlAdvc:
          $ref: "#/components/schemas/AcceptorCancellationAdvice"
        amount:
          type: string
          xml:
            name: DollarAmount
            attribute: false
            wrapped: false
        currency_code:
          type: string
          xml:
            name: Currency
            attribute: false
            wrapped: false
        encryptionBlock:
          type: string
        encryptionType:
          type: string
        keyId:
          type: string
        requestType:
          type: string
          enum:
            - CANCEL
            - CHARGES
            - HEALTH
            - REFUND
            - UNKNOWN
        sourceType:
          type: string
      title: NexoRequest
      xml:
        name: root
        attribute: false
        wrapped: false
    POIComponent:
      type: object
      properties:
        poiComponentIdentification:
          $ref: "#/components/schemas/POIComponentIdentification"
        poiComponentType:
          type: string
          xml:
            name: Tp
            attribute: false
            wrapped: false
      title: POIComponent
    POIComponentIdentification:
      type: object
      properties:
        id:
          type: string
          xml:
            name: Id
            attribute: false
            wrapped: false
        providerId:
          type: string
          xml:
            name: PrvdrId
            attribute: false
            wrapped: false
        serialNumber:
          type: string
          xml:
            name: SrlNb
            attribute: false
            wrapped: false
      title: POIComponentIdentification
    POIIdentification:
      type: object
      properties:
        Id:
          type: string
          xml:
            name: Id
            attribute: false
            wrapped: false
        ShrtNm:
          type: string
          xml:
            name: ShrtNm
            attribute: false
            wrapped: false
      title: POIIdentification
    PaymentContext:
      type: object
      properties:
        AttndncCntxt:
          type: string
          xml:
            name: AttndncCntxt
            attribute: false
            wrapped: false
        CardDataNtryMd:
          type: string
          xml:
            name: CardDataNtryMd
            attribute: false
            wrapped: false
        CardPres:
          type: boolean
          xml:
            name: CardPres
            attribute: false
            wrapped: false
        CrdhldrPres:
          type: boolean
          xml:
            name: CrdhldrPres
            attribute: false
            wrapped: false
        FllbckInd:
          type: string
          xml:
            name: FllbckInd
            attribute: false
            wrapped: false
        SpprtdOptn:
          type: string
          xml:
            name: SpprtdOptn
            attribute: false
            wrapped: false
      title: PaymentContext
    PostalAddress:
      type: object
      properties:
        country:
          type: string
          xml:
            name: Ctry
            attribute: false
            wrapped: false
        postCode:
          type: string
          xml:
            name: PstCd
            attribute: false
            wrapped: false
        streetName:
          type: string
          xml:
            name: StrtNm
            attribute: false
            wrapped: false
      title: PostalAddress
    ProtectedCardData:
      type: object
      properties:
        envelopedData:
          $ref: "#/components/schemas/EnvelopedData"
      title: ProtectedCardData
    Recipient:
      type: object
      properties:
        kek:
          $ref: "#/components/schemas/KEK"
      title: Recipient
    RelayIdentification:
      type: object
      properties:
        Id:
          type: string
          xml:
            name: Id
            attribute: false
            wrapped: false
        Tp:
          type: string
          xml:
            name: Tp
            attribute: false
            wrapped: false
      title: RelayIdentification
    TaxVerificationResult:
      type: object
      properties:
        Mtd:
          type: string
        Rslt:
          type: string
      title: TaxVerificationResult
    Traceability:
      type: object
      properties:
        RlayId:
          $ref: "#/components/schemas/RelayIdentification"
        TracDtTmIn:
          type: string
          xml:
            name: TracDtTmIn
            attribute: false
            wrapped: false
        TracDtTmOut:
          type: string
          xml:
            name: TracDtTmOut
            attribute: false
            wrapped: false
      title: Traceability
    Transaction:
      type: object
      properties:
        CardPrgrmmApld:
          type: string
          xml:
            name: CardPrgrmmApld
            attribute: false
            wrapped: false
        CstmrCnsnt:
          type: string
          xml:
            name: CstmrCnsnt
            attribute: false
            wrapped: false
        InitrTxId:
          type: string
          xml:
            name: InitrTxId
            attribute: false
            wrapped: false
        MrchntCtgyCd:
          type: string
          xml:
            name: MrchntCtgyCd
            attribute: false
            wrapped: false
        RcncltnId:
          type: string
          xml:
            name: RcncltnId
            attribute: false
            wrapped: false
        TxCaptr:
          type: string
          xml:
            name: TxCaptr
            attribute: false
            wrapped: false
        TxDtls:
          $ref: "#/components/schemas/TransactionDetails"
        TxId:
          $ref: "#/components/schemas/TransactionIdentification"
        TxTp:
          type: string
          xml:
            name: TxTp
            attribute: false
            wrapped: false
      title: Transaction
    TransactionDetails:
      type: object
      properties:
        AmtQlfr:
          type: string
          xml:
            name: AmtQlfr
            attribute: false
            wrapped: false
        Ccy:
          type: string
          xml:
            name: Ccy
            attribute: false
            wrapped: false
        DtldAmt:
          type: string
          xml:
            name: DtldAmt
            attribute: false
            wrapped: false
        Grtty:
          type: string
          xml:
            name: Grtty
            attribute: false
            wrapped: false
        ICCRltdData:
          type: string
          xml:
            name: ICCRltdData
            attribute: false
            wrapped: false
        TtlAmt:
          type: string
          xml:
            name: TtlAmt
            attribute: false
            wrapped: false
      title: TransactionDetails
    TransactionIdentification:
      type: object
      properties:
        TxDtTm:
          type: string
          xml:
            name: TxDtTm
            attribute: false
            wrapped: false
        TxRef:
          type: string
          xml:
            name: TxRef
            attribute: false
            wrapped: false
      title: TransactionIdentification

